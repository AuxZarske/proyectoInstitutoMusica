{%extends 'index.html'%}

{% load staticfiles %}

{%block contenidiPagina%}
<script>
        var lista = [];
</script>
    {%for k,v in dicti.items%}
    <script>
        
        
        t = { y: parseInt("{{v}}"), name: "{{k}}", exploded: true }
        lista.push(t)

        
    </script>
    {%endfor%}

    <script>
        var lista2 = [];
</script>
    {%for k,v in dicti4.items%}
    <script>
        
        
        t = { y: parseInt("{{v}}"), name: "{{k}}", exploded: true }
        lista2.push(t)

        
    </script>
    {%endfor%}

    <script>
        var lista3 = [];
</script>
    {%for k,v in dicti7.items%}
    <script>
        
        
        t = { y: parseInt("{{v}}"), name: "{{k}}", exploded: true }
        lista3.push(t)

        
    </script>
    {%endfor%}

<script>
        window.onload = function () {
            
            
        var chart = new CanvasJS.Chart("chartContainer", {
            exportEnabled: true,
            animationEnabled: true,
            title:{
                text: "Compositores mas destacados"
            },
            legend:{
                cursor: "pointer",
                itemclick: explodePie
            },
            data: [{
                type: "pie",
                showInLegend: true,
                toolTipContent: "{name}: <strong>{y}%</strong>",
                indexLabel: "{name} - {y}%",
                dataPoints: lista
            }]
        });
        
                
        
        var chart2 = new CanvasJS.Chart("chartContainer2", {
            exportEnabled: true,
            animationEnabled: true,
            title:{
                text: "Generos musicales mas preferidos"
            },
            legend:{
                cursor: "pointer",
                itemclick: explodePie
            },
            data: [{
                type: "pie",
                showInLegend: true,
                toolTipContent: "{name}: <strong>{y}%</strong>",
                indexLabel: "{name} - {y}%",
                dataPoints: lista2
            }]
        });
        var chart3 = new CanvasJS.Chart("chartContainer3", {
            exportEnabled: true,
            animationEnabled: true,
            title:{
                text: "Niveles de dificultad mas utilizado"
            },
            legend:{
                cursor: "pointer",
                itemclick: explodePie
            },
            data: [{
                type: "pie",
                showInLegend: true,
                toolTipContent: "{name}: <strong>{y}%</strong>",
                indexLabel: "{name} - {y}%",
                dataPoints: lista3
            }]
        });
        
        chart.render();       
        chart2.render();
        chart3.render();
        }
        
        
        
        function explodePie (e) {
            if(typeof (e.dataSeries.dataPoints[e.dataPointIndex].exploded) === "undefined" || !e.dataSeries.dataPoints[e.dataPointIndex].exploded) {
                e.dataSeries.dataPoints[e.dataPointIndex].exploded = true;
            } else {
                e.dataSeries.dataPoints[e.dataPointIndex].exploded = false;
            }
            e.chart.render();
        
        }
        </script>
       
        </head>

        <style type="text/css">
            div#colapser1 {
        
                display: none;
            }
        
            div#colapser2 {
        
                display: none;
            }
        
            div.colap {
                margin-bottom: 5%;
            }
        
            path.highcharts-button-symbol {
                display: none;
            }
            label#tyutyu2{
                display: inline-block;
            }
            input#tyutyu{
                display: inline-block;
                width: 20%;
            }
            div.canvasjs-chart-toolbar{
                display: none;
            }
        </style>


        <body>
                <div class="colap">
                        <div>
                            <h1 class="h3 mb-2 text-gray-800">Grafico de utilidad de partituras </h1>
                            <p class="mb-4">Se presentan los generos musicales, niveles y compositores que estan mas presentes en las partituras usadas durante las clases.</p>
                            <div style="display: none;">
                                    <form class="user" method="POST">
                                            {% csrf_token %}
                                <label for="" id="tyutyu2">Filtrar por a√±o: </label>
                                <input class="form-control" id="tyutyu" name="number"  type="number" placeholder="{{num}}" min="2000" max="2100">
                                <button class="btn btn-primary" type="submit">Filtrar</button>
                                    </form>
                            </div>
                            <br>
                            <br>
                        </div>
                        <div >
                            <!---->
                    
                            
                            <div id="chartContainer" style="height: 370px; width: 100%;"></div>
                    
                            <!---->
                        </div>
                        <br>
                        <br>
                        <br>
                        <br>
                        <div >
                            <!---->
                    
                            
                            <div id="chartContainer2" style="height: 370px; width: 100%;"></div>
                    
                            <!---->
                        </div>
                        <br>
                        <br>
                        <br>
                        <br>
                        <div >
                            <!---->
                    
                            
                            <div id="chartContainer3" style="height: 370px; width: 100%;"></div>
                    
                            <!---->
                        </div>
                    </div>



        



        <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>



        </body>

{% endblock contenidiPagina %}